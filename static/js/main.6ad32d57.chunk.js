(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(t,e,n){"use strict";n.d(e,"b",(function(){return _})),n.d(e,"d",(function(){return S})),n.d(e,"c",(function(){return A}));var r=n(11),a=n.n(r),c=n(21),s=n(26),u=n(5),i=n(15),o=function(t,e,n,r){return t.map((function(t){return t[n]===e?Object(u.a)(Object(u.a)({},t),r):t}))},l="find/SET_FOLLOW",f="find/SET_UNFOLLOW",p="find/SET_USERS",d="find/SET_TOTAL_COUNT",j="find/SET_PAGE_NUMBER",b="find/SET_IS_FETCHING",h="find/SET_FOLLOWING",O={usersData:[],pageSize:5,pageNumber:1,totalCount:0,isFetching:!1,followingInProgress:[]},x=function(t){return{type:l,id:t}},m=function(t){return{type:f,id:t}},g=function(t){return{type:j,pageNumber:t}},v=function(t){return{type:b,isFetching:t}},y=function(t,e){return{type:h,inProgress:t,userId:e}},_=function(t,e){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(v(!0)),n.next=3,i.c.getUsers(t,e);case 3:c=n.sent,r((s=c.items,{type:p,users:s})),r((a=c.totalCount,{type:d,totalCount:a})),r(v(!1)),r(g(e));case 8:case"end":return n.stop()}var a,s}),n)})));return function(t){return n.apply(this,arguments)}}()},w=function(){var t=Object(c.a)(a.a.mark((function t(e,n,r,c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(y(!0,c)),t.next=3,n(c);case 3:0===t.sent&&(e(r(c)),e(y(!1,c)));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),S=function(t){return function(e){w(e,i.c.setUnfollow.bind(i.c),m,t)}},A=function(t){return function(e){w(e,i.c.setFollow.bind(i.c),x,t)}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(u.a)(Object(u.a)({},t),{},{usersData:o(t.usersData,e.id,"id",{followed:!0})});case f:return Object(u.a)(Object(u.a)({},t),{},{usersData:o(t.usersData,e.id,"id",{followed:!1})});case p:return Object(u.a)(Object(u.a)({},t),{},{usersData:Object(s.a)(e.users)});case d:return Object(u.a)(Object(u.a)({},t),{},{totalCount:e.totalCount});case j:return Object(u.a)(Object(u.a)({},t),{},{pageNumber:e.pageNumber});case b:return Object(u.a)(Object(u.a)({},t),{},{isFetching:e.isFetching});case h:return Object(u.a)(Object(u.a)({},t),{},{followingInProgress:e.inProgress?[].concat(Object(s.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},133:function(t,e,n){},134:function(t,e,n){t.exports={myPosts:"MyPosts_myPosts__6tNHf"}},135:function(t,e,n){t.exports={post:"Post_post__1WtZp"}},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n(130),a=n.n(r).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"a096fe26-0545-4f07-8c19-2ba2fe66063d"}}),c={setAuth:function(){return a.get("/auth/me").then((function(t){return t.data}))},login:function(t,e,n){return a.post("/auth/login",{email:t,password:e,rememberMe:n})},logout:function(){return a.delete("/auth/login")}},s={getUsers:function(t,e){return a.get("/users?count=".concat(t,"&page=").concat(e)).then((function(t){return t.data}))},setFollow:function(t){return a.post("/follow/".concat(t)).then((function(t){return t.data.resultCode}))},setUnfollow:function(t){return a.delete("/follow/".concat(t)).then((function(t){return t.data.resultCode}))},getProfile:function(t){return console.log("\u0421\u0442\u0430\u0440\u044b\u0439 \u043c\u0435\u0442\u043e\u0434"),u.getProfile(t)}},u={getProfile:function(t){return a.get("/profile/"+t)},getStatus:function(t){return a.get("/profile/status/"+t)},updateStatus:function(t){return a.put("/profile/status",{status:t})}}},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var r=n(26),a=n(5),c=n(95),s=n(1),u=(n(0),n(55)),i=n.n(u),o=n(87),l=function(t){var e=t.input,n=t.placeholder,r=t.type,u=t.meta,o=u.touched,l=u.error,f=t.text,p=(Object(c.a)(t,["input","placeholder","type","meta","text"]),o&&l);return Object(s.jsxs)("div",{children:[Object(s.jsx)("input",Object(a.a)(Object(a.a)({},e),{},{placeholder:n,type:r,className:p&&i.a.inputError}))," ",f,p&&Object(s.jsx)("span",{className:i.a.errorText,children:l})]})},f=function(t,e,n,a,c,u){return Object(s.jsx)("div",{children:Object(s.jsx)(o.a,{name:t,component:e,type:n,placeholder:a,validate:Object(r.a)(c),text:u})})}},245:function(t,e,n){},246:function(t,e,n){},288:function(t,e,n){},289:function(t,e,n){},290:function(t,e,n){},291:function(t,e,n){"use strict";n.r(e);var r=n(1),a=function(t){t&&t instanceof Function&&n.e(5).then(n.bind(null,294)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},c=n(9),s=n(129),u=n(96),i=n(11),o=n.n(i),l=n(21),f=n(26),p=n(5),d=n(15),j="profile/ADD_POST",b="profile/SET_PROFILE_DATA",h="profile/SET_STATUS",O={postsData:[{id:1,message:"Hello1",likeCount:"20"},{id:2,message:"Hello2",likeCount:"25"},{id:3,message:"Hello3",likeCount:"30"}],profileData:{},status:""},x=function(t){return{type:h,status:t}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(p.a)(Object(p.a)({},t),{},{postsData:[].concat(Object(f.a)(t.postsData),[{id:"6",message:e.text,likeCount:"0"}])});case b:return Object(p.a)(Object(p.a)({},t),{},{profileData:e.profileData});case h:return Object(p.a)(Object(p.a)({},t),{},{status:e.status});default:return t}},g=n(128),v=n(35),y="auth/SET_AUTH_DATA",_="auth/SET_IS_AUTH",w={data:{userId:null,email:null,login:null},isAuth:!1},S=function(t){return{type:y,data:t}},A=function(t){return{type:_,isAuth:t}},D=function(){return function(){var t=Object(l.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.setAuth();case 2:0===(n=t.sent).resultCode&&(e(S(n.data)),e(A(!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(p.a)(Object(p.a)({},t),{},{data:e.data});case _:return Object(p.a)(Object(p.a)({},t),{},{isAuth:e.isAuth});default:return t}},k="app/INITIALAZE_SUCCSES",C={initialaze:!1},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return Object(p.a)(Object(p.a)({},t),{},{initialaze:!0});default:return t}},I=n(127),N=Object(c.c)({profilePage:m,dialogsPage:u.b,findPage:g.a,auth:P,form:I.a,app:T}),E=Object(c.e)(N,Object(c.a)(s.a));window.store=E;var F=E,U=n(0),L=n.n(U),H=n(65),z=n.n(H),M=(n(245),n(37)),B=n(38),G=n(40),R=n(39),W=(n(246),n(12)),J=n(25),q=n(90),Z=n.n(q),K=function(t){var e=t.isAuth,n=t.data,a=t.logout;return Object(r.jsxs)("header",{className:Z.a.header,children:[Object(r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Instagram_logo_2016.svg/768px-Instagram_logo_2016.svg.png",alt:""}),Object(r.jsx)("div",{className:Z.a.authBlock,children:e?Object(r.jsxs)("div",{children:[n.login,Object(r.jsx)("button",{onClick:a,children:"Logout"})]}):Object(r.jsx)(J.b,{to:"/login",children:"Login"})})]})},V=function(t){Object(G.a)(n,t);var e=Object(R.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"render",value:function(){return Object(r.jsx)(K,Object(p.a)({},this.props))}}]),n}(L.a.Component),Y=Object(W.b)((function(t){return{data:t.auth.data,isAuth:t.auth.isAuth}}),{setAuth:D,logout:function(){return function(){var t=Object(l.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.logout();case 2:0===t.sent.data.resultCode&&(e(S({userId:null,email:null,login:null})),e(A(!1)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(V),Q=n(54),X=n.n(Q),$=function(t){var e=t.path,n=t.text;return Object(r.jsx)("div",{className:X.a.item,children:Object(r.jsx)(J.b,{to:e,activeClassName:X.a.active,children:n})})},tt=function(){return Object(r.jsxs)("nav",{className:X.a.nav,children:[Object(r.jsx)($,{path:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(r.jsx)($,{path:"/dialogs",text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(r.jsx)($,{path:"/find",text:"\u041f\u043e\u0438\u0441\u043a \u043b\u044e\u0434\u0435\u0439"}),Object(r.jsx)($,{path:"/news",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(r.jsx)($,{path:"/music",text:"\u041c\u0443\u0437\u044b\u043a\u0430"}),Object(r.jsx)($,{path:"/settings",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})},et=n(133),nt=n.n(et),rt=n(126),at=n(134),ct=n.n(at),st=n(135),ut=n.n(st),it=function(t){var e=t.message,n=t.likeCount;return Object(r.jsxs)("div",{className:ut.a.post,children:[Object(r.jsx)("img",{src:"https://i.pinimg.com/736x/0c/a9/e2/0ca9e28dcb12dc698cfd2beda6d6fa64--youtube.jpg",alt:""}),e,Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{children:"Like"})," - ",n]})]})},ot=n(34),lt=n(24),ft=Object(ot.a)(15),pt=Object(rt.a)({form:"post"})((function(t){var e=t.handleSubmit;return Object(r.jsxs)("form",{onSubmit:e,children:[Object(lt.b)("postText",lt.a,"text","post",[ot.b,ft],null),Object(r.jsx)("button",{children:"Add"})]})})),dt=function(t){var e=t.posts.map((function(t){return Object(r.jsx)(it,{message:t.message,likeCount:t.likeCount})}));return Object(r.jsxs)("div",{className:ct.a.myPosts,children:[Object(r.jsx)("h3",{children:"My Posts"}),Object(r.jsx)("div",{children:Object(r.jsx)(pt,{onSubmit:function(e){t.addPost(e.postText)}})}),e]})},jt=Object(W.b)((function(t){return{posts:t.profilePage.postsData,newPostText:t.profilePage.newPostText}}),{addPost:function(t){return{type:j,text:t}}})(dt),bt=n(88),ht=function(t){var e=Object(U.useState)(!1),n=Object(bt.a)(e,2),a=n[0],c=n[1],s=Object(U.useState)(t.status),u=Object(bt.a)(s,2),i=u[0],o=u[1];return Object(U.useEffect)((function(){o(t.status)}),[t.status]),Object(r.jsxs)(r.Fragment,{children:[!a&&Object(r.jsx)("div",{children:Object(r.jsx)("span",{onDoubleClick:function(){c(!0)},children:t.status||"-----"})}),a&&Object(r.jsx)("div",{children:Object(r.jsx)("input",{type:"text",autoFocus:!0,onBlur:function(){c(!1),t.updateStatus(i)},onChange:function(t){o(t.currentTarget.value)},value:i})})]})},Ot=function(t){var e=t.profileData,n=t.status,a=t.updateStatus;return Object(r.jsxs)("div",{children:[void 0!==e.photos&&Object(r.jsx)("img",{src:e.photos.small,alt:""}),e.fullName,Object(r.jsx)(ht,{status:n,updateStatus:a})]})},xt=n(42),mt=function(t){return void 0===t.profileData.fullName?Object(r.jsx)(xt.a,{}):Object(r.jsxs)("div",{className:nt.a.profile,children:[Object(r.jsx)(Ot,{profileData:t.profileData,status:t.status,updateStatus:t.updateStatus}),Object(r.jsx)(jt,{})]})},gt=n(10),vt=function(t){Object(G.a)(n,t);var e=Object(R.a)(n);function n(){var t;Object(M.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).render=function(){return Object(r.jsx)(mt,{profileData:t.props.profileData,isAuth:t.props.isAuth,status:t.props.status,updateStatus:t.props.updateStatus})},t}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.match,n=t.userId,r=t.history,a=e.params.userId;a||(a=n)?(this.props.getUserProfile(a),this.props.getStatus(a)):r.push("/login")}},{key:"componentDidUpdate",value:function(){var t=this.props,e=t.isAuth,n=t.history;e||n.push("/login")}}]),n}(L.a.Component),yt=Object(c.d)(Object(W.b)((function(t){return{profileData:t.profilePage.profileData,status:t.profilePage.status,isAuth:t.auth.isAuth,userId:t.auth.data.id}}),{getUserProfile:function(t){return function(){var e=Object(l.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c.getProfile(t);case 2:r=e.sent,n((a=r.data,{type:b,profileData:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},getStatus:function(t){return function(){var e=Object(l.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.getStatus(t);case 2:r=e.sent,n(x(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateStatus:function(t){return function(){var e=Object(l.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.b.updateStatus(t);case 2:0===e.sent.data.resultCode&&n(x(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),gt.f)(vt),_t=(n(288),function(){return Object(r.jsx)("div",{children:"News"})}),wt=(n(289),function(){return Object(r.jsx)("div",{children:"Music"})}),St=(n(290),function(){return Object(r.jsx)("div",{children:"Settings"})}),At=n(55),Dt=n.n(At),Pt=Object(ot.a)(30),kt=Object(rt.a)({form:"login"})((function(t){var e=t.handleSubmit,n=t.error;return Object(r.jsxs)("form",{onSubmit:e,children:[Object(lt.b)("email",lt.a,"text","email",[ot.b,Pt],null),Object(lt.b)("password",lt.a,"text","password",[ot.b,Pt],null),Object(lt.b)("rememberMe",lt.a,"checkbox",null,[],"Remember Me"),n&&Object(r.jsx)("div",{className:Dt.a.errorFromServer,children:n}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Submit"})})]})})),Ct=Object(W.b)((function(t){return{isAuth:t.auth.isAuth}}),{login:function(t,e,n){return function(){var r=Object(l.a)(o.a.mark((function r(a){var c;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.a.login(t,e,n);case 2:0===(c=r.sent).data.resultCode?a(D()):a(Object(v.a)("login",{_error:c.data.messages}));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}})((function(t){return t.isAuth?Object(r.jsx)(gt.a,{to:"/profile"}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsx)(kt,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe)}})]})})),Tt=function(t){return function(e){return Object(r.jsx)("div",{children:Object(r.jsx)(U.Suspense,{fallback:Object(r.jsx)(xt.a,{}),children:Object(r.jsx)(t,Object(p.a)({},e))})})}},It=L.a.lazy((function(){return n.e(3).then(n.bind(null,296))})),Nt=L.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),Et=function(t){Object(G.a)(n,t);var e=Object(R.a)(n);function n(){return Object(M.a)(this,n),e.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.setInitialaze()}},{key:"render",value:function(){return this.props.initialaze?Object(r.jsxs)("div",{className:"app-wrapper",children:[Object(r.jsx)(Y,{}),Object(r.jsx)(tt,{}),Object(r.jsxs)("div",{className:"app-wrapper-content",children:[Object(r.jsx)(gt.b,{path:"/profile/:userId?",render:function(){return Object(r.jsx)(yt,{})}}),Object(r.jsx)(gt.b,{path:"/dialogs",render:Tt(It)}),Object(r.jsx)(gt.b,{path:"/find",render:Tt(Nt)}),Object(r.jsx)(gt.b,{path:"/login",render:function(){return Object(r.jsx)(Ct,{})}}),Object(r.jsx)(gt.b,{path:"/news",component:_t}),Object(r.jsx)(gt.b,{path:"/music",component:wt}),Object(r.jsx)(gt.b,{path:"/settings",component:St})]})]}):Object(r.jsx)(xt.a,{})}}]),n}(L.a.Component),Ft=Object(W.b)((function(t){return{initialaze:t.app.initialaze}}),{setInitialaze:function(){return function(t){t(D()).then((function(){t({type:k})}))}}})(Et);z.a.render(Object(r.jsx)(J.a,{children:Object(r.jsx)(W.a,{store:F,children:Object(r.jsx)(Ft,{})})}),document.getElementById("root")),a()},34:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r=function(t){if(!t)return"Write"},a=function(t){return function(e){if(!(e&&e.length<=t))return"\u041c\u043d\u043e\u0433\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}}},42:function(t,e,n){"use strict";var r=n(1),a=(n(0),n.p+"static/media/Preloader.2310675a.svg");e.a=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("img",{src:a,alt:""})})}},54:function(t,e,n){t.exports={nav:"Nav_nav__3IqUU",item:"Nav_item__1Bk3c",active:"Nav_active__1Hs6H"}},55:function(t,e,n){t.exports={inputError:"InputForm_inputError__3O0qr",errorText:"InputForm_errorText__3J6r9",errorFromServer:"InputForm_errorFromServer__27AhV"}},90:function(t,e,n){t.exports={header:"Header_header__2G971",authBlock:"Header_authBlock__9zypy"}},96:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(26),a=n(5),c="message/ADD_MESSAGE",s={dialogsData:[{id:"1",name:"Arseniy"},{id:"2",name:"Sveta"},{id:"3",name:"Bla"},{id:"4",name:"Lala"},{id:"5",name:"Ogo"}],messagesData:[{id:"1",text:"Hello"},{id:"2",text:"How are you?"},{id:"3",text:"yo"},{id:"4",text:"yo"},{id:"5",text:"yo"}]},u=function(t){return{type:c,text:t}};e.b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return Object(a.a)(Object(a.a)({},t),{},{messagesData:[].concat(Object(r.a)(t.messagesData),[{id:"6",text:e.text}])});default:return t}}}},[[291,1,2]]]);
//# sourceMappingURL=main.6ad32d57.chunk.js.map